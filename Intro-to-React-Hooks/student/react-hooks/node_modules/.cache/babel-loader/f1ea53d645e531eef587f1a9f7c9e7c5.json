{"ast":null,"code":"/*\nThis module implements the observer design pattern and allows\nother modules to register/unregister a callback function that\nwill be invoked when the battery's charge level or charging status\nchanges.\n\nThis module currently only works with Chrome, Opera & Samsung browsers.\nYou can read the Battery Status API specification here:\nhttps://w3c.github.io/battery/\n\nAdditional events/properties available but not used in this module:\n- chargingtimechange/chargingTime\n- ondischargingtimechange/dischargingTime\n*/\nlet battery;\nconst observerCallbacks = [];\n\nasync function initBattery() {\n  battery = await navigator.getBattery();\n  battery.addEventListener(\"levelchange\", notifyObservers);\n  battery.addEventListener(\"chargingchange\", notifyObservers);\n  notifyObservers();\n}\n\ninitBattery();\n\nfunction getBatteryData() {\n  return {\n    level: battery.level,\n    charging: battery.charging\n  };\n}\n\nfunction notifyObservers() {\n  observerCallbacks.forEach(cb => cb(getBatteryData()));\n}\n\nexport function register(callback) {\n  if (observerCallbacks.includes(callback)) return;\n  observerCallbacks.push(callback);\n\n  if (battery) {\n    callback(getBatteryData());\n  }\n}\nexport function unregister(callback) {\n  let idx = observerCallbacks.indexOf(callback);\n  if (idx !== -1) observerCallbacks.splice(idx, 1);\n}","map":{"version":3,"sources":["/Users/sumayajasim/Desktop/SEIBH1/Unit-3-React-Express-MongoDB/Intro-to-React-Hooks/student/react-hooks/src/utils/battery.js"],"names":["battery","observerCallbacks","initBattery","navigator","getBattery","addEventListener","notifyObservers","getBatteryData","level","charging","forEach","cb","register","callback","includes","push","unregister","idx","indexOf","splice"],"mappings":"AAAA;;;;;;;;;;;;;;AAeA,IAAIA,OAAJ;AACA,MAAMC,iBAAiB,GAAG,EAA1B;;AAEA,eAAeC,WAAf,GAA6B;AAC3BF,EAAAA,OAAO,GAAG,MAAMG,SAAS,CAACC,UAAV,EAAhB;AACAJ,EAAAA,OAAO,CAACK,gBAAR,CAAyB,aAAzB,EAAwCC,eAAxC;AACAN,EAAAA,OAAO,CAACK,gBAAR,CAAyB,gBAAzB,EAA2CC,eAA3C;AACAA,EAAAA,eAAe;AAChB;;AAEDJ,WAAW;;AAEX,SAASK,cAAT,GAA0B;AACxB,SAAO;AACLC,IAAAA,KAAK,EAAER,OAAO,CAACQ,KADV;AAELC,IAAAA,QAAQ,EAAET,OAAO,CAACS;AAFb,GAAP;AAID;;AAED,SAASH,eAAT,GAA2B;AACzBL,EAAAA,iBAAiB,CAACS,OAAlB,CAA0BC,EAAE,IAAIA,EAAE,CAACJ,cAAc,EAAf,CAAlC;AACD;;AAED,OAAO,SAASK,QAAT,CAAkBC,QAAlB,EAA4B;AACjC,MAAIZ,iBAAiB,CAACa,QAAlB,CAA2BD,QAA3B,CAAJ,EAA0C;AAC1CZ,EAAAA,iBAAiB,CAACc,IAAlB,CAAuBF,QAAvB;;AACA,MAAIb,OAAJ,EAAa;AACXa,IAAAA,QAAQ,CAACN,cAAc,EAAf,CAAR;AACD;AACF;AAED,OAAO,SAASS,UAAT,CAAoBH,QAApB,EAA8B;AACnC,MAAII,GAAG,GAAGhB,iBAAiB,CAACiB,OAAlB,CAA0BL,QAA1B,CAAV;AACA,MAAII,GAAG,KAAK,CAAC,CAAb,EAAgBhB,iBAAiB,CAACkB,MAAlB,CAAyBF,GAAzB,EAA8B,CAA9B;AACjB","sourcesContent":["/*\nThis module implements the observer design pattern and allows\nother modules to register/unregister a callback function that\nwill be invoked when the battery's charge level or charging status\nchanges.\n\nThis module currently only works with Chrome, Opera & Samsung browsers.\nYou can read the Battery Status API specification here:\nhttps://w3c.github.io/battery/\n\nAdditional events/properties available but not used in this module:\n- chargingtimechange/chargingTime\n- ondischargingtimechange/dischargingTime\n*/\n\nlet battery;\nconst observerCallbacks = [];\n\nasync function initBattery() {\n  battery = await navigator.getBattery();\n  battery.addEventListener(\"levelchange\", notifyObservers);\n  battery.addEventListener(\"chargingchange\", notifyObservers);\n  notifyObservers();\n}\n\ninitBattery();\n\nfunction getBatteryData() {\n  return {\n    level: battery.level,\n    charging: battery.charging\n  };\n}\n\nfunction notifyObservers() {\n  observerCallbacks.forEach(cb => cb(getBatteryData()));\n}\n\nexport function register(callback) {\n  if (observerCallbacks.includes(callback)) return;\n  observerCallbacks.push(callback);\n  if (battery) {\n    callback(getBatteryData());\n  }\n}\n\nexport function unregister(callback) {\n  let idx = observerCallbacks.indexOf(callback);\n  if (idx !== -1) observerCallbacks.splice(idx, 1);\n}"]},"metadata":{},"sourceType":"module"}